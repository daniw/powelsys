\documentclass[a4paper,11pt,fleqn]{article}

\usepackage{layout}

\title{Power electronic systems - Exercise 5.5}
\author{Daniel Winz}
\date{\today}

%\includeonly{}

\begin{document}

\section{Exercise}
Given is the following boost converter: 

\[ V_o = \SI{200}{\volt} \]
\[ L = \SI{200}{\micro\henry} \]
\[ C = \SI{5}{\micro\farad} \]
\[ R = \SI{50}{\ohm} \]
\[ f_s = \SI{100}{\kilo\hertz} \]

\begin{circuitikz}[european voltages, european resistors, american inductors]
    \draw (0,0)
    to[V, v<=$V_i$]         +( 0, 2)
    to[short, i>^=$I_i$]    +( 1, 0)
    to[L=L, -*]             +( 2, 0)
    to[D, l=D, -*]          +( 2, 0)
    to[short, i>^=$I_o$]    +( 2, 0)
    to[R=R]                 +( 0,-2)
    to[short, -*]           +(-2, 0)
    to[short, -*]           +(-2, 0)
    to[short]               +(-3, 0)
    (5, 2) to[C=C]          (5,0)
    (3,1) node[nigfete=Q] (fet) {}
    (fet) node[right] {Q}
    (fet.S) to[short] (3,0)
    (fet.D) to[short] (3,2)
    (7.5,2) to[open, v^>=$V_0$] (7.5,0)
    ;
\end{circuitikz}

\section{Solution}
The duty ratio for different input voltages is calculated using the volt 
second balance. 
\[ V_{L_1} \cdot D + V_{L_2} \cdot (1 - D) = 0 \]
\[ V_{L_1} = V_i \qquad V_{L_2} = V_i - V_o \]
\[ \to V_i \cdot D + (V_i - V_o) \cdot (1 - D) = 0 \]
\[ V_i \cdot D + V_i \cdot (1 - D) - V_o \cdot (1 - D) = 0 \]
\[ V_i \cdot \underbrace{(D + 1 - D)}_{1} = V_o \cdot (1 - D) \]
%\[ V_o = \dfrac{V_i}{1 - D} \]
%\[ M(D) = \dfrac{V_o}{V_i} = \dfrac{1}{1 - D} \]
\[ \underline{D = 1 - \frac{V_i}{V_o}} \]

\begin{table}[h!]
    \centering
    \begin{zebratabular}{lll}
        \rowcolor{gray}
        $V_i$ [\si{\volt}]  & $V_o$ [\si{\volt}]    & $D$ [\,]\\
         50 & 200   & 0.75  \\
        100 & 200   & 0.5   \\
        150 & 200   & 0.25  \\
    \end{zebratabular}
    \caption{Duty cycle for several input voltages}
    \label{tab:duty}
\end{table}

For each input voltage it is checked, if the converter is still in continuous 
conduction mode (CCM). 
\[ \Delta I_L < 2 \cdot I_o \]
\[ \dfrac{V_i \cdot D}{L \cdot f_s} < 2 \cdot \dfrac{V_o}{R} \]
\[ D < 2 \cdot \dfrac{V_o \cdot L \cdot f_s}{R \cdot V_i} \]

\begin{figure}[h!]
    \begin{minipage}[c]{0.49\textwidth}
        \begin{circuitikz}[scale=0.9, european voltages, european resistors, american inductors]
            \draw (0,0)
            to[V, v<=$V_i$]         +( 0, 2)
            to[short, i>^=$I_i$]    +( 1, 0)
            to[L=L]                 +( 2, 0)
            to[open]                +( 2, 0)
            to[short, i>^=$I_o$]    +( 2, 0)
            to[R=R]                 +( 0,-2)
            to[short, -*]           +(-2, 0)
            to[short, -*]           +(-2, 0)
            to[short]               +(-3, 0)
            (5, 2) to[C=C]          (5,0)
            (3,0) to[short] (3,2)
            (7.5,2) to[open, v^>=$V_0$] (7.5,0)
            ;
        \end{circuitikz}
    \end{minipage}
    \begin{minipage}[c]{0.49\textwidth}
        \begin{circuitikz}[scale=0.9, european voltages, european resistors, american inductors]
            \draw (0,0)
            to[V, v<=$V_i$]         +( 0, 2)
            to[short, i>^=$I_i$]    +( 1, 0)
            to[L=L]                 +( 2, 0)
            to[short, -*]           +( 2, 0)
            to[short, i>^=$I_o$]    +( 2, 0)
            to[R=R]                 +( 0,-2)
            to[short, -*]           +(-2, 0)
            to[short]               +(-2, 0)
            to[short]               +(-3, 0)
            (5, 2) to[C=C]          (5,0)
            (7.5,2) to[open, v^>=$V_0$] (7.5,0)
            ;
        \end{circuitikz}
    \end{minipage}
\end{figure}

\end{document}
